---
title: Hardhat and Celo
description: The ultimate guide to dpeloy Celo dapps using hardhat.
lesson: "0"
restriction: "YesDialog"
publishedAt: "2023-02-01"
---

## Introduction

_How to deploy a smart contract to Celo testnet, mainnet, or a local network using Hardhat._

![header](https://docs.celo.org/assets/images/the-ultimate-guide-to-deploy-celo-dapps-using-hardhat-c1c712b6a2e297293bee99c60a29ec76.png)

## Hello Developers ðŸŒ±

Welcome to todayâ€™s post, where weâ€™ll break down a blockchain topic into bite-sized pieces to help you learn and apply your new skills in the real world.

Todayâ€™s topic is Deploying on Celo with Truffle.

**Hereâ€™s a list of what weâ€™ll cover ðŸ—’**

- âœ… **Step 1:** Environment setupâ€‹
- âœ… **Step 2:** Project setup
- âœ… **Step 3:** Write project code
- âœ… **Step 4:** Configure deployment settings
- âœ… **Step 5:** Compile and migrate your contract
- âœ… **Step 6:** Deploy your Contract
- âœ… **Step 7:** View your deployed contract
- âœ… **Step 8:** Verify your smart contract

By the end of this post, youâ€™ll be able to create, deploy, and interact with your smart contract on Celo testnet, mainnet, or localhost using Truffle.

Letâ€™s go! ðŸš€

### Introduction to Hardhatâ€‹

[Hardhat](https://hardhat.org/) is a development environment to compile, deploy, test, and debug your
Ethereum or Celo software. It helps developers manage and automate the recurring tasks that are inherent to
the process of building smart contracts and dApps, as well as easily introducing more functionality around
this workflow. This means compiling, running, and testing smart contracts at the very core.

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*6bO0ib5Z5Ya1xx6vpz_2Iw.png)

- Learn more: If you are new to Hardhat check out [Hardhat.org](https://hardhat.org/).

### âœ… Step 1: Environment setupâ€‹

Before getting started youâ€™ll need to set up Celo in your local environment. You can do this on Mac or Windows and can find the details on [docs.celo.org](docs.celo.org).

- [Using Windows](https://docs.celo.org/developer-guide/start/develop-on-windows)
- [Using Mac](https://docs.celo.org/developer-resources/using-mac)

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*gMN4z9vOAxivKDpnFC-cFQ.png)

Celo projects include common dependencies like `Nodejs`, `npm`, `nvm`, `yarn`, `git`, and `xCode`. If you already have these installed you can follow this post to set up Celo specific dependencies.

### Celo Command Line Interface

The celocli lets you interact with the Celo Protocol smart contracts.

```bash
npm install -g @celo/celocli
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*Dws-_JyHCyBKVVHTw5COyw.png)

## Install Ganache (optional)

[Ganache UI](https://next-stack.github.io/ganache/) creates a local blockchain to help you deploy and test contracts. You can install and set up the UI from their website and can find more details in the [Ganache docs](https://trufflesuite.com/docs/ganache/overview.html).

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*z9eiaxJZdbjwV-IX5bDguA.png)

- The [@celo/ganache-cli](https://github.com/celo-org/ganache-cli) is Celoâ€™s version of Ganache. It doesnâ€™t seem to be working for me but you can try installing it in your environment.

From the Ganache UI, create a new workspace on `localhost:7545`.

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*rqkGzVcwZR1ofiS2uW1TXQ.png)

## âœ… Step 2: Project setup

Now that you have your environment setup, youâ€™re ready to create your project! Open your terminal to create and navigate into a project folder.

```bash
mkdir celo-hardhat && cd celo-hardhat
```

### Initialize an npm project

Initialize an npm project from within the project directory.

```bash
npm init -y
```

### Install dotenv

[Dotenv](https://www.npmjs.com/package/dotenv) is a module that loads environment variables from a `.env` file. Install this now and youâ€™ll use this to import information to your Truffle configuration file.

```bash
npm install dotenv
```

### Initialize hardhat

Adding hardhat to your project allows you to easily build, test, and deploy smart contracts. You can install using `npm` or `npx`.

```bash
npm install --save-dev hardhat
```

or

```bash
npx hardhat
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*8ylm4OJmsTp77yEJWfr7CQ.png)

- Learn more: Follow the [installation instructions and quickstart](https://hardhat.org/getting-started/#installation) for additional details.

### Customize project settings

After initializing hardhat have the chance to customize your project settings. In this post, weâ€™ll Create a basic sample project and accept all of the default settings.

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*TjsLgH2oOPPGZmS-3H3ivA.png)

### Open your project

Your project is set up and youâ€™re ready to start building! Open your project in [Visual Studio code](https://www.microsoft.com/en-us/resilience/remote-development-solutions/?&ef_id=Cj0KCQjwtrSLBhCLARIsACh6RmixaTeMbvlNJN4yrdykHGg5e4aN2Px1-Vf_oUq2edhP86n2C1-8lDIaAkxcEALw_wcB:G:s&OCID=AID2200893_SEM_Cj0KCQjwtrSLBhCLARIsACh6RmixaTeMbvlNJN4yrdykHGg5e4aN2Px1-Vf_oUq2edhP86n2C1-8lDIaAkxcEALw_wcB:G:s) or your preferred IDE.

```bash
code .
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*yP7wk9hoT4BLSoCt-rG4-w.png)

:::tip

You can launch VS Code from the command line by [installing it in your shell path](https://code.visualstudio.com/docs/setup/mac).

:::

### âœ… Step 3: Write project code

To build your project youâ€™ll write a `smart contract`, `script` , `.env`, and `.gitignore` file. Youâ€™ll also create an account, fund it with test tokens, and connect the account to your project.

### Smart Contract Code

Hardhat provides a `Greeter.sol` contract to get you started. For this post, youâ€™ll make your own files to give you a better idea of how everything works. Start by creating a file named `HelloCelo.sol` in the `/contracts` folder and add the Solidity code below.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.3;
contract HelloCelo {
   string public greet = "Hello Celo!";
}
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*7xKUeShYe2DUqkjPEeHxkw.png)

- Learn more: Read the [Solidity docs](https://docs.soliditylang.org/en/v0.8.9/) or [Solidity by Example](https://solidity-by-example.org/) to learn more about the programming language for building smart contracts.

### Script files

Hardhat also provides a `sample-script.js` file in the `/scripts` folder that you can use to deploy your smart contract. By default, it will deploy the `Greeter.sol` contract. Run the sample script to deploy this contract now!

### Deploy Greeter.sol

```bash
npx hardhat run scripts/sample-script.js
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*1YofNVspeofZFY83DE_q2A.png)

To deploy the `HelloCelo.sol` contract you created, youâ€™ll need to update the `sample-script.js` file to include the new smart contract information. To do this, replace lines 17â€“22 with the code below.

```javascript
const HelloCelo = await hre.ethers.getContractFactory("HelloCelo");
const helloCelo = await HelloCelo.deploy();
await helloCelo.deployed();
console.log("HelloCelo deployed to:", helloCelo.address);
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*hAp9rOC1m4diXpAwACu87g.png)

- If you created a different smart contract, update the const names, file requirement and deployment to match your new contract.

### Deploy HelloCelo.sol

You can now re-run `sample-script.js` to deploy the `HelloCelo.sol` contract.

```bash
npx hardhat run scripts/sample-script.js
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*l6fD3r17eC5gw4NrWR30uw.png)

### âœ… Step 4: Create and fund your account

To deploy to the test or main Celo networks, youâ€™ll need an account that is funded with CELO tokens. In this post, youâ€™ll get set up to deploy for free on the Celo Alfajores test network!

### Create an account

If you donâ€™t already have an account you would like to use, you can run celocli account:newfrom your terminal to create one for this project.

```bash
celocli account:new
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*-v7rfIYaFY_KhdjIojVebA.png)

### Fund your account

The [Alfajores testnet faucet](https://faucet.celo.org) helps you fund your account with test tokens. Copy your address from the terminal and paste it into the site to fund your account. This should send you tokens within a few seconds.

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*z32hWeC23i2fiBxySYvLcg.png)

### Check account balance

If youâ€™d like to check your new account balance, you can use celocli to make sure you received your test funds.

```bash
celocli account:balance 0xYOURADDRESS
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*AR6A87KsonBIQc2X0Txo7g.png)

### Create .env file

A `.env` file will help you hide the sensitive information you need for your configuration file. Create a `.env` file in your root folder and add your accountâ€™s private key.

```javascript
PRIVATE_KEY =
  "5ead931ce4812310e31f84c471945b96a13098aa6dc8cf0d3f6f451a5dea56cc";
```

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*Q_hNMp3YtIKwRn91Wcb2Wg.png)

- See [ignoring files](https://help.github.com/articles/ignoring-files/) for more information.

### âœ… Step 5: Configure deployment settings

The hardhat configuration file specifies the networks for your contract deployment. As of now, the `sample-script.js` file â€‹is deploying your contracts to a local blockchain on Hardhat.

### Update hardhat.config

To deploy to Celo, you to update the configuration file to point to the Celo network. To do this, open [hardhat-config.js](https://hardhat.org/config/) in a text editor and replace its contents with this [Celo configuration code](https://github.com/joenyzio/celo-hardhat/blob/main/hardhat.config.js).

### Local network

Creating your new Ganache workspace earlier made a local blockchain at `localhost:7545`. The `local` configuration connects to this local blockchain.

```javascript
localhost: {
      url: "http://127.0.0.1:7545"
    },
```

- If you choose to [Set up a Local Development Chain](https://docs.celo.org/developer-guide/development-chain), your blockchain will also be hosted on a private network on localhost. This same configuration can be used to connect to the local development chain.

### Alfajores test network

The `alfajores` configuration uses Forno to connect you to Alfajores using the private key in your `.env` file.

```javascript
alfajores: {
   url: â€œhttps://alfajores-forno.celo-testnet.org",
   accounts: [process.env.PRIVATE_KEY],
   chainId: 44787,
},
```

### Celo main network

The `celo` configuration uses Forno to connect you to mainnet using the private key in your `.env` file. This tutorial will use Alfajores but you can to deploy to the main network whenever youâ€™d like.

```javascript
celo: {
   url: "https://forno.celo.org",
   accounts: [process.env.PRIVATE_KEY],
   chainId: 42220,
},
```

:::tip

[Forno](https://docs.celo.org/developer-guide/forno) is a cLabs hosted node service for interacting with the Celo network. This allows you to connect to the Celo Blockchain without having to run your own node.

:::

### âœ… Step 6: Deploy your contract

Youâ€™ve done the hard part and itâ€™s now time to deploy your contract to Celo! Run any of the following commands from your root project directory to deploy to Celo.

### Deploy to Alfajores

This post got you set up to deploy on Alfajores. Try it out now! If this works you can skip the other deployment options and move on to the next step.

```bash
npx hardhat run scripts/sample-script.js --network alfajores
```

### Deploy to Mainnet

Replace the private key in `.env` with a Celo Mainnet account that has Celo. Once youâ€™ve done that youâ€™ll be ready to deploy to Mainnet.

```bash
npx hardhat run scripts/sample-script.js --network celo
```

### Deploy to Local Host

Open Ganache (installation instructions at beginning of the post) and create a workspace on `localhost:7545`. Then youâ€™ll be able to deploy to localhost.

```bash
npx hardhat run scripts/sample-script.js --network localhost
```

### âœ… Step 7: View your deployed contract

Now that you deployed your contract, you can view it in the Celo block explorer (known as [BlockScout](https://explorer.celo.org/). Copy your contract address from the terminal and navigate to the [block explorer](https://explorer.celo.org/) to search for your deployed contract.

- Switch to your network using the dropdown by the search bar.
- Navigate to [BlockScout](https://explorer.celo.org/) and select the network of your deployed contract.
- Paste your contract address from the terminal window and search for it in BlockExplorer.

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/0*DdwqMd4EaG_RcguQ.png)

:::tip

Learn more about building and deploying dApps using the [HardHat documentation](https://hardhat.org/).

:::

### âœ… Step 8: Verify your smart contract

For people to use and interact with your contract, theyâ€™ll want to be able to view the smart contract code you created. Verifying a smart contract allows people to to do this from within the Celo Block Explorer.

### Using Blockscoutâ€‹

Navigate to the `Code` tab on the `Explorer` page for your contractâ€™s address
Click `Verify & Publish` to enter the smart contract verification page

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/0*2L7QMv94Ncov9V5G.png)

- Upload your smart contract (example: `HelloCelo.sol`) and its `.json` file (example: `HelloCelo.json`) found in `build > contracts folder`.

![image](https://miro.medium.com/v2/resize:fit:4800/format:webp/0*bq9tzn8SL57Rqh6p.png)

- Click `Verify & Publish`
- Navigate to the `Contract Address Details` Page in the block explorer to, use the Code, Read Contract, and Write Contract panels to view and interact with your deployed smart contract.

### Using Hardhat-deploy pluginâ€‹

You can read an in depth guide about how to deploy and verify contracts on Celo programmatically using the hardhat-deploy plugin [here](https://docs.celo.org/blog/hardhat-deploy-verify).

### Congratulations ðŸŽ‰

That wraps up todayâ€™s topic on _Deploying on Celo with Hardhat_. You can review each of the items we covered below and check that youâ€™re ready to apply these new skills.

**Hereâ€™s a review of what we covered ðŸ¤”**

- âœ… **Step 1:** Environment setupâ€‹
- âœ… **Step 2:** Project setup
- âœ… **Step 3:** Write project code
- âœ… **Step 4:** Configure deployment settings
- âœ… **Step 5:** Compile and migrate your contract
- âœ… **Step 6:** Deploy your Contract
- âœ… **Step 7:** View your deployed contract
- âœ… **Step 8:** Verify your smart contract

If you run into any issues, try reviewing the content or searching online to explore each topic in more detail. Hopefully, youâ€™ve learned a few things about **Deploying on Celo with Hardhat** that you can apply in the real world.

GN! ðŸ‘‹
